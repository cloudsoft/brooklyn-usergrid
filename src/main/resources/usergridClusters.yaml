name: Usergrid clustered (multi-host) deployment
services:
- serviceType: brooklyn.entity.webapp.ControlledDynamicWebAppCluster
  brooklyn.config:
    initialSize: 3
    memberSpec:
      $brooklyn:entitySpec:
        type: io.cloudsoft.usergrid.UsergridTomcatServer
        brooklyn.config:
          version: 7.0.53
          wars.root: classpath://ROOT.war
          usergridPropertiesTemplateUrl: classpath://usergrid-clusters.properties
          cassandraDatacenter: $brooklyn:component("theCassandraNode") 
- serviceType: brooklyn.entity.nosql.cassandra.CassandraDatacenter
  id: theCassandraNode
  brooklyn.config:
    initialSize: 3
#location: localhost
## Replace the line above with the following to deploy to softlayer
location:
  jclouds:softlayer:
    region: ams01 # Amsterdam
## NOTE: You will also need the following lines in your ~/.brooklyn/brooklyn.properties
## brooklyn.location.jclouds.softlayer.identity=<your softlayer login name>
## brooklyn.location.jclouds.softlayer.credential=<your softlayer authentication key>